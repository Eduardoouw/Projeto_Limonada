<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Virtual - 36 Teclas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

    <!-- LOGIN MODAL -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2>Login</h2>
            <form id="loginForm">
                <input type="email" placeholder="Email" id="loginEmail" required>
                <input type="password" placeholder="Senha" id="loginPassword" required>
                <button type="submit">Entrar</button>
            </form>
            Sem conta? <a href="cadastro.html">Crie uma conta!</a>
            <p id="loginError" style="color: var(--main-color); margin-top: 10px; display: none;">Email ou senha incorretos!</p>
        </div>
    </div>

    <!-- USER INFO -->
    <div class="user-info" id="userInfo" style="display: none;">
        <span id="userEmailDisplay"></span>
        <button id="logoutBtn">Sair</button>
    </div>
<!-- notas a serem dispostas -->
    <div class="note-display">
        <span id="current-note">C4</span>
        <span id="current-frequency">261.63 Hz</span>
    </div>

    <div class="music-selector">
        <label for="musicSelect" style="background: brown;padding: 6px;border-radius: 8px;">Música:</label>
        <select id="musicSelect">
            <option value="">Selecione uma música...</option>
        </select>
        <button id="clearSequence">Limpar Seleção</button>
    </div>

    <div class="sequence-reader" id="sequenceReader">
    <div class="sequence-track" id="sequenceTrack">
        </div>
</div>

    <div class="controls-container">
        <button id="playMusicButton">Music Tocar Música</button> 
    </div>

     <div class="piano-container">
        <div class="piano" id="piano">
            </div>
    </div>

    <!-- MENU HAMBÚRGUER -->
    <div class="menu-button" id="menuButton">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- SIDEBAR -->
   <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Menu Principal</h3>
            <button class="close-sidebar" id="closeSidebar"><i class="fas fa-times"></i></button>
        </div>
        <div class="sidebar-menu">
            <button data-modal="modalMusicas"><i class="fas fa-music"></i> Repertório</button>
            <button data-modal="modalConfig"><i class="fas fa-cogs"></i> Configurações</button>
            <button data-modal="modalSobre"><i class="fas fa-info-circle"></i> Sobre o Site</button>
            <button data-modal="modalAjuda"><i class="fas fa-keyboard"></i> Teclas / Ajuda</button>
            <button data-modal="modalContato"><i class="fas fa-phone"></i> Contato</button>
            <button data-modal="modalSobreDev"><i class="fas fa-code"></i> Desenvolvedores</button>
            <button data-modal="loginModal"><i class="fas fa-user-circle"></i> Login/Logout</button>
        </div>
        <div class="sidebar-social">
            <p>Conecte-se:</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
        </div>
    </div>

    <!-- MODAIS NORMAIS -->
     <div class="modal" id="modalMusicas">
        <div class="modal-content music-modal">
            <span class="close">×</span>
            <h2><i class="fas fa-compact-disc"></i> Repertório Automático</h2>
            <p class="music-info-text">Selecione uma música e use os botões abaixo para controlar a reprodução.</p>
            
            <div id="music-list-container">
                </div>

            <div class="music-controls-area">
                <button id="playMusicButton"><i class="fas fa-play"></i> Tocar Música</button>
                <button id="pauseMusicButton"><i class="fas fa-pause"></i> Pausar Música</button>
                <button id="stopMusicButton"><i class="fas fa-stop"></i> Parar</button>
            </div>
        </div>
    </div>

    <div class="modal" id="modalConfig">
        <div class="modal-content config-modal">
            <span class="close">×</span>
            <h2><i class="fas fa-cogs"></i> Configurações do Sistema</h2>

            <div class="config-section">
                <h3>Tema de Cores</h3>
                <p>Muda as cores de todo o design do site (texto, bordas, brilhos, animações).</p>
                <div class="color-options" id="theme-selector">
                    <button class="color-option theme-cyan" data-theme="cyan" title="Ciano/Padrão"></button>
                    <button class="color-option theme-magenta" data-theme="magenta" title="Magenta/Roxo"></button>
                    <button class="color-option theme-green" data-theme="green" title="Verde Neon"></button>
                    <button class="color-option theme-gold" data-theme="gold" title="Dourado/Amarelo"></button>
                </div>
            </div>

            <div class="config-section">
                <h3>Plano de Fundo</h3>
                <p>Selecione uma imagem de fundo (os arquivos devem estar na mesma pasta).</p>
                <select id="background-selector">
                    <option value="Partitura.jpg">Partitura (Padrão)</option>
                    <option value="P.jpg">Abstrato (P.jpg)</option>
                    <option value="none">Cor Sólida (Sem Imagem)</option>
                </select>
            </div>

            <div class="config-section">
                <h3>Velocidade da Música Automática</h3>
                <p>Ajuste o delay (em milissegundos) entre as notas. (Menor valor = Mais Rápido)</p>
                <input type="range" id="speed-range" min="100" max="600" value="300" step="50">
                <p>Velocidade Atual: <span id="current-speed">300ms</span></p>
            </div>
        </div>
    </div>

    <div class="modal" id="modalSobre">
        <div class="modal-content info-modal">
            <span class="close">×</span>
            <h2><i class="fas fa-info-circle"></i> Sobre o Piano Virtual</h2>
            <div class="info-content">
                <p>Este piano virtual é um projeto Web Audio API e JavaScript feito para apresentações. Ele oferece uma experiência de piano de 36 teclas, com foco em personalização e funcionalidade automática.</p>
                
                <h3>Funcionalidades Essenciais</h3>
                <ul>
                    <li><strong>Piano Interativo:</strong> Toca notas usando o mouse ou o teclado físico (veja "Teclas / Ajuda").</li>
                    <li><strong>Repertório Automático:</strong> Reproduz músicas pré-carregadas com opções de Tocar, Pausar e Parar.</li>
                    <li><strong>Configurações de Design:</strong> Permite trocar o tema de cores (bordas, textos, brilhos) e a imagem de fundo.</li>
                    <li><strong>Velocidade Musical:</strong> Controle de velocidade da reprodução automática.</li>
                    <li><strong>Visualizador:</strong> Exibe a nota e frequência da tecla pressionada em tempo real.</li>
                </ul>

                <h3>Como o Site Funciona (O Baita Texto)</h3>
                <p>O site utiliza o **Web Audio API** para síntese de áudio. Uma nota base (C4) é pré-carregada, e as outras notas são geradas ajustando-se a taxa de reprodução (`playbackRate`) do buffer de áudio com base na fórmula do temperamento igual. As cores e animações são controladas dinamicamente por **Variáveis CSS** (Custom Properties), permitindo que a troca de tema no JavaScript mude todo o design com eficiência.</p>

                <p>O objetivo do projeto é demonstrar o poder da combinação de HTML/CSS/JavaScript na criação de ferramentas interativas e personalizáveis, garantindo estabilidade e visual atraente para grandes públicos.</p>
            </div>
        </div>
    </div>

    <div class="modal" id="modalAjuda">
        <div class="modal-content info-modal">
            <span class="close">×</span>
            <h2><i class="fas fa-keyboard"></i> Mapeamento de Teclas</h2>
            <div class="info-content">
                <p>Use as teclas do seu teclado físico para tocar o piano. O mapeamento é configurado para cobrir 36 teclas, desde C3 até C6.</p>

                <h3>Teclas Brancas (Exemplos)</h3>
                <p>Linha Principal: **q w e r t y u i o p [ ]**</p>
                <p>Segunda Linha: **a s d f g h j k l ; '**</p>
                
                <h3>Teclas Pretas (Exemplos)</h3>
                <p>Use os números e Shift para as notas pretas no teclado. **2 3 5 6 7 9 0 - =**</p>
                
                <p class="key-note-alert">**Observação:** O mapeamento completo e preciso está definido no arquivo `script.js` e se adapta ao layout ABNT/QWERTY padrão.</p>
            </div>
        </div>
    </div>

    <div class="modal" id="modalContato">
        <div class="modal-content info-modal">
            <span class="close">×</span>
            <h2><i class="fas fa-phone"></i> Contato</h2>
            <div class="info-content">
                <p>Para suporte ou dúvidas sobre o projeto:</p>
                <p><strong>Email Principal:</strong> contato@pianovirtual.com</p>
                <p><strong>Telefone:</strong> (99) 98765-4321 (Fictício para apresentação)</p>
                <p style="margin-top: 15px;">Em caso de emergência antes da apresentação, use a aba "Desenvolvedores" para encontrar os contatos diretos.</p>
            </div>
        </div>
    </div>

    <div class="modal" id="modalSobreDev">
        <div class="modal-content dev-modal">
            <span class="close">×</span>
            <h2>Sobre os Devs</h2>
            <div class="dev-grid">
                <div class="dev-card">
                    <img src="Eduardo.jpg" alt="Eduardo"> 
                    <h3>Eduardo</h3> 
                    <p>Frontend & Design</p>
                    <p><i class="fab fa-github"></i> @seu_github</p>
                </div>
                <div class="dev-card">
                    <img src="Ezequiel.jpg" alt="Ezequiel"> 
                    <h3>Ezequiel</h3> 
                    <p>Web Audio & JS</p>
                    <p><i class="fab fa-linkedin"></i> linkedin.com/in/ezequiel</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="updateProfileModal">
        <div class="modal-content registration-card">
            <span class="close">×</span>
            <h2>Atualizar Perfil</h2>
            <form id="updateProfileForm">
                
                <div class="profile-picture-upload">
                    <div class="profile-pic-preview" id="updateProfilePicPreview">
                        <i class="fas fa-camera"></i>
                    </div>
                    <input type="file" id="updateProfilePicInput" accept="image/*" style="display: none;">
                    <button type="button" id="selectUpdateProfilePicBtn" class="upload-btn">Escolher Foto</button>
                </div>
                
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="updateName" placeholder="Novo Nome/Apelido" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="updateEmail" placeholder="Email" required > 
                </div>
                
                <hr style="border: 1px solid rgba(255,255,255,0.1); margin: 20px 0;">
                
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="updateOldPassword" placeholder="Senha Atual (obrigatório)" required>
                </div>

                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="updateNewPassword" placeholder="Nova Senha (opcional)">
                </div>

                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="updateConfirmNewPassword" placeholder="Confirmar Nova Senha">
                </div>
                
                <p id="updateProfileError" style="color: #e74c3c; margin-top: 10px; display: none;"></p>
                <p id="updateProfileSuccess" style="color: #2ecc71; margin-top: 10px; display: none;"></p>

                <button type="submit" id="saveProfileBtn">Salvar Alterações</button>
            </form>
        </div>
    </div>


    <script src="script.js"></script>
</body>
</html>
